- name: OpenSearch
  subtype: service
  filters:
    ors: 
      - type: simple
        object: content
        value: 'xmlns="http://a9.com/-/spec/opensearch/1.1/"'
  service_description:
    - name: 'OpenSearchDescription'
      filters: 
        ors:
          - type: simple
            object: content
            value: 'OpenSearchDescription'
  datasets:
  metadatas:
  errors:
    filters:
      ors:
          # these are based on the cwic best practices and may 
          # not be in widespread use
        - type: simple
          object: content
          value: 'OpenSearch Exception'
        - type: simple
          object: content
          value: 'REQUEST_EXCEPTION:'
  versions:
    defaults:
      ors:
        - type: simple
          object: content
          value: 'http://a9.com/-/spec/opensearch/1.1/'
          text: '1.1'
- name: OGC:error
  subtype: service
  filters:
    # a variety of error options based on versions
    ors: 
      - type: simple
        object: content
        value: 'http://www.opengis.net/ogc'
      - type: simple
        object: content
        value: 'ServiceExceptionReport'
      - type: simple
        object: content
        value: 'ExceptionReport'
      - type: simple
        object: content
        value: 'http://schemas.opengis.net/ows/1.0.0/owsExceptionReport.xsd'
  errors:
    filters:
      ors:
        # and this is ridiculous
        - type: simple
          object: content
          value: 'ServiceExceptionReport'
        - type: simple
          object: content
          value: 'ExceptionReport'
        - type: simple
          object: content
          value: 'http://schemas.opengis.net/ows/1.0.0/owsExceptionReport.xsd'        
  versions:
    checks:
      ors:
        - type: xpath
          # fully qualified xpath which is lovely and short here
          value: '@version'
- name: OGC:WMS
  subtype: service
  filters:
    ors:
      - type: simple
        object: content
        value: 'http://www.opengis.net/wms'
  service_description:
    - name: GetCapabilities
      filters:
        ors:
            # we are assuming that we are starting with a 
            # correctly identified wxs response
          - type: simple
            object: url
            value: 'REQUEST=GETCAPABILITIES'
          - type: simple
            object: content
            value: '<GetCapabilities>'
          - type: simple
            object: content
            value: 'name="GetCapabilities"'
  datasets:
  metadatas:
  versions:
    checks:
      ors:
        - type: xpath
          # fully qualified xpath which is lovely and short here
          value: '@version'
- name: OGC:WFS
  subtype: service
  filters:
    ors:
      - type: simple
        object: content
        value: 'http://www.opengis.net/wfs'
  service_description:
    - name: GetCapabilities
      filters:
        ors:
          - type: simple
            object: url
            value: 'REQUEST=GETCAPABILITIES'
          - type: simple
            object: content
            value: '<GetCapabilities>'
          - type: simple
            object: content
            value: 'name="GetCapabilities"'
  datasets:
    - name: GetFeature
      filters:
        ands:
          - type: simple
            object: content
            value: '<ows:Operation name="GetFeature">'
          - type: simple
            object: content
            value: '<FeatureTypeList>'
  metadatas:
    # contains a link to a metadata url (we don't care 
    # about parentage at this point)
    filters:
      ors:
        - type: xpath
          operator: exists
          value: '/*/{http://www.opengis.net/wfs}FeatureTypeList/{http://www.opengis.net/wfs}FeatureType/{http://www.opengis.net/wfs}MetadataURL'

  versions:
    checks:
      ors:
        - type: xpath
          # fully qualified xpath which is lovely and short here
          value: '@version'
- name: OGC:WCS
  subtype: service
  filters:
    ors:
      - type: simple
        object: content
        value: 'http://www.opengis.net/wfs'
  service_description:
    - name: GetCapabilities
      filters:
        ors:
          - type: simple
            object: url
            value: 'REQUEST=GETCAPABILITIES'
          - type: simple
            object: content
            value: '<GetCapabilities>'
          - type: simple
            object: content
            value: 'name="GetCapabilities"'
  datasets:
  metadatas:
  versions:
    checks:
      ors:
        - type: xpath
          # fully qualified xpath which is lovely and short here
          value: '@version'
- name: OGC:CSW
  subtype: service
  filters:
    ors:
      - type: simple
        object: content
        value: 'http://www.opengis.net/cat/csw'
  service_description:
    - name: GetCapabilities
      filters:
        ors:
          - type: simple
            object: url
            value: 'REQUEST=GETCAPABILITIES'
          - type: simple
            object: content
            value: '<GetCapabilities>'
          - type: simple
            object: content
            value: 'name="GetCapabilities"'
  datasets:
  metadatas:
  versions:
    checks:
      ors:
        - type: xpath
          # fully qualified xpath which is lovely and short here
          value: '@version'